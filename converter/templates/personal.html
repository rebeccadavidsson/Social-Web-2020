{% extends "base.html" %}

{% block title %} Profile {% endblock %}

{% block nav %}{% include 'navigation.html' %}{% endblock nav %}

{% block body %}

<div class="space"></div>
<div class="container emp-profile">

  <div class="search-bar">
        <input type="text" name="search" value="" autocomplete="off" id="myinput" onkeyup="searchFunction()" onkeydown="release()" placeholder="Search">
          <ul id="wrapper">
            {% for username in users %}
              <div id="friendoption" style="display:none;">
                <a href="{% url 'searchprofile' username %}" style="color:white">{{ username }}</a>
                <span class="time-right"><img src="https://media-exp1.licdn.com/dms/image/C5603AQF54EcNtyGnyA/profile-displayphoto-shrink_200_200/0?e=1586995200&v=beta&t=TMMRXfh0RcT04rV6f8N-iJmTuxLo6Li5NU479VPgIVs" alt="Avatar" class="right"></span>
              </div>
              {% endfor %}
          </ul>
  </div>

    <form method="post" action="{% url 'settings' %}">
      {% csrf_token %}
        <div class="row">
            <div class="col-md-4">
                <div class="profile-img">
                    <img src="https://usc.uva.nl/wp-content/themes/usc/img/logo-usc.png" alt="FOTOFOTO"/>
                    <div class="file btn btn-lg btn-primary">
                        Change Photo
                        <input type="file" name="file"/>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="profile-head">
                            <h5>
                                {{ user }}
                            </h5>
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                      <br>
                        <!-- <li class="nav-item">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Timeline</a>
                        </li> -->
                    </ul>
                </div>
            </div>
            <div class="col-md-2">
                <input type="submit" class="profile-edit-btn" name="btnAddMore" value="Edit Profile"/>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="profile-work">
                    <a href=""> {{ user }}</a><br/>
                    <p>TODO</p>
                    <a href="">TODO</a><br/>

                </div>
            </div>
            <div class="col-md-8">
                <div class="tab-content profile-tab" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <div class="row">
                            <div class="col-md-6">
                                <label>User Id</label>
                            </div>
                            <div class="col-md-6">
                                <p> TODO </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Name</label>
                            </div>
                            <div class="col-md-6">
                                <p> {{ user }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Email</label>
                            </div>
                            <div class="col-md-6">
                                <p>TODO</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">

  function searchFunction() {
    var input, filter, ul, li, a, i;
    input = document.getElementById('myinput');
    filter = input.value.toUpperCase();
    ul = document.getElementById('wrapper');
    li = ul.getElementsByTagName('div');

    for(i=0 ; i< li.length; i++){
        a = li[i].getElementsByTagName('a')[0];
        if(a.innerHTML.toUpperCase().indexOf(filter) > -1){
            li[i].style.display = "";
        }

        else{
            li[i].style.display = 'none';
        }
    }
}

function release() {
  // ul = document.getElementById('wrapper');
  // ul.style.display = "none"
}

document.getElementById('myinput').addEventListener('keydown', function (event) {
  if (event.keyCode == 8 || event.keyCode == 46 || event.keyCode == 27) {
    document.getElementById('wrapper').style.display = "none";
  }
  else {
    document.getElementById('wrapper').style.display = "";
  }
});

</script>

{% endblock %}
